<!-- #ROW: Breadcrumb -->
<rnd-breadcrumb>
  <!-- search box -->
  <rnd-searchbox options="{placeholder:'buscar entidad', nameprop:'NOKOEN'}"
                 meta="metaEntidad.data"
                 dataset="pasoEntidad"
                 source="traeEntidad"
                 dialog="{onChange:onChangeEntidad}"
                 rtablas="metaEntidad.rtablas">
  </rnd-searchbox>
  <!-- /search box -->
</rnd-breadcrumb>

<section ng-if="pasoEntidad.data.length">

  <!-- #ROW: Entidad -->
  <div rnd-row>
    <div class="col-xs-4 p-inner">
      <!-- Entidad -->
      <rnd-profile meta="metaEntidad.data"
                   options="{showEmpty:'<h2>¡Nadie aquí!</h2><p>Usa el cuadro de búsqueda para traer la deuda de un cliente</p>', title:'Datos entidad'}"
                   source="pasoEntidad"
                   rtablas="metaEntidad.rtablas">
      </rnd-profile>
      <!-- /Entidad -->
    </div>
    <div class="col-xs-8 p-inner">
      <!-- totales -->
      <rnd-tile-simple source="{value:2,name:'total selección'}"></rnd-tile-simple>
      <rnd-tile-simple source="{value:1,name:'total pagos'}"></rnd-tile-simple>
      <!-- /totales -->
    </div>
    <!-- separator -->
  </div>

  <!-- #ROW: Separador -->
  <div rnd-row
       class="rnd-gray"></div>

  <!-- #ROW: Pagos -->
  <div rnd-row>

    <div class="col-md-10 col-lg-8 xp-inner">
      <!--<button ng-click="apiPago.redraw()">Refresh</button>-->

      <!-- /Pagos -->
      <rnd-smtable meta="metaPago.data"
                   options="{showEmpty:'No hay pagos registrados', title:'Registro de pagos', textCreate:'Ingresar un documento de pago', pagesize:5, pageheight:5}"
                   source="pasoPago"
                   rtablas="metaPago.rtablas"
                   dialog="{selectRow:selectRow,onChange:onChangeValue, onAddRow:onAddRowPago, canCreate:true }"
                   api="apiPago">
      </rnd-smtable>
      <br>
      <!-- /Pagos -->
    </div>
    <div class="col-md-10 col-lg-8 xp-inner">
      <!-- Deuda -->
      <rnd-smtable meta="metaDeuda.data"
                   options="{showEmpty:'¡Todo pagado!', title:'Estado de cuenta',pagesize:5, pageheight:5}"
                   source="pasoDeuda"
                   dialog="{selectRow:selectRow}"
                   rtablas="metaDeuda.rtablas"
                   api="apiDeuda">
      </rnd-smtable>
      <!-- /Deuda -->
      <br>
    </div>
  </div>

  <!-- #ROW: Cruce -->
  <div rnd-row>
    <div class="col-md-10 col-lg-8 xp-inner">
      <!-- Cruce -->
      <rnd-smtable xng-if="pasoCruce.data.length"
                   meta="metaCruce.data"
                   options="{showEmpty:'Vacío', title:'Asignación'}"
                   source="pasoCruce"
                   dialog="{onChange:onChangeValue}"
                   api="apiCruce">
      </rnd-smtable>
      <!-- /Cruce -->
      <br>
    </div>
  </div>

</section>